{% from '_helpers.html' import browsers, browser_item, browser_notifications, headsets, youtube %}
{% set page = 'index.html' -%}

<!doctype html>
<html lang="en" data-layout="home" data-newbie="true">
  <head>
    {% include '_head.html' %}
    <title>WebVR Rocks â€¢ Your guide to Virtual Reality in the browser</title>
  </head>
  <body>
    <header id="header" class="site-header">
      <div class="container section">
        {% include '_logo.html' %}
        <nav class="site-nav" role="navigation">
          <ul class="site-nav-list">
            <li data-slug="slack"><a class="no-underline social-link" href="/chat">Join our <b>WebVR #Rocks</b> chat</a></li>
            <li data-slug="twitter"><a class="no-underline social-link" href="https://twitter.com/WebVRrocks">Stay tuned on Twitter <b>@WebVRrocks</b></a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main" class="main" role="main">
      <div class="container">
        <section class="notifications" id="notifications">
          {% for _, browser in browsers %}
            {% if browser.notifications %}
              {{ browser_notifications(browser) }}
            {% endif %}
          {% endfor %}
        </section>

        <section id="intro" class="section intro" data-section="intro">
          <div class="intro-text">
            <p class="intro-para"><strong>WebVR</strong> is a <a href="https://w3c.github.com/webvr/"><em>JavaScript API</em></a> for creating immersive 3D, <em>Virtual Reality</em> experiences in your <em>browser</em>.</p>
            <p class="intro-compat">Works with the <a href="{{ headsets.htc_vive.about }}">{{ headsets.htc_vive.name }}</a>, <a href="{{ headsets.oculus_rift.about }}">{{ headsets.oculus_rift.name }}</a>, <a href="{{ headsets.samsung_gear_vr.about }}">{{ headsets.samsung_gear_vr.name }}</a>, <a href="{{ headsets.google_daydream.about }}">{{ headsets.google_daydream.name }}</a>, and <a href="{{ headsets.google_cardboard.about }}">{{ headsets.google_cardboard.name }}</a>.</p>
          </div>
          <div class="intro-video">
            <a href="https://www.youtube.com/watch?v=Le8pTXQqM3s" class="button button-approve button-large button-watch-video" aria-controls="modal" data-expands-for>
              {% include "media/img/video.svg" %}
              Watch video
            </a>
            <div class="intro-video-inner">
              {{ youtube('Le8pTXQqM3s') }}
            </div>
          </div>
        </section>

        <section id="browsers" class="section browsers" data-section="browsers">
          <h1><a href="#browsers">WebVR Browsers</a></h1>
          <ul data-section="browsers" class="matrix grid-flex-container">
            {{ browser_item('firefox') }}
            {{ browser_item('microsoft_edge') }}
            {{ browser_item('chrome_for_android') }}
            {{ browser_item('chromium') }}
            {{ browser_item('samsung_internet') }}
            {{ browser_item('oculus_browser') }}
            {{ browser_item('servo') }}
          </ul>
        </section>

        {% block browsers_block %}
          <section id="browsers" class="section browsers" data-section="browsers">
            <h2><a href="#browsers">{{ demos_heading or demos_title or 'Supported browsers' }}</a></h2>
            {% block browsers %}
              {% set browsers_list = [] %}
              {% for os, browsers in headset.platforms %}
                {% for browser in browsers %}
                  {% if browser not in browsers_list %}
                    {% set browsers_list = (browsers_list.push(browser), browsers_list) %}
                  {% endif %}
                {% endfor %}
              {% endfor %}
              {% for browser in browsers_list %}
                <h3><a href="{{ browsers[browser].about }}" itemprop="aboutUrl">{{ browsers[browser].name }}</a></h3>
                <p><a class="button button-outlined-approve button-download" href="{{ browsers[browser].about }}" itemprop="aboutUrl">Download</a></p>
              {% endfor %}
            {% endblock %}
          </section>
        {% endblock %}

        {% block headsets_block %}
          <section id="headsets" class="section headsets" data-section="headsets">
            <h2><a href="#headsets">{{ demos_heading or demos_title or 'Supported headsets' }}</a></h2>
            {% block headsets %}
              {% set headsets_list = [] %}
              {% for headset_slug in headsets %}
                {% set headset = headsets[headset_slug] %}
                <h3><a href="{{ headsets[headset_slug].about }}" itemprop="aboutUrl">{{ headset.name }}</a></h3>
              {% endfor %}
            {% endblock %}
          </section>
        {% endblock %}
      </div>
    </main>

    {% include '_footer.html' %}
  </body>
</html>
